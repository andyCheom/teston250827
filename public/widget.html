<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>처음서비스 CS 챗봇 위젯</title>
    <link rel="stylesheet" href="/widget-style.css">
</head>
<body>
    <!-- 챗봇 위젯 토글 버튼 -->
    <div id="chatbot-toggle" class="chatbot-toggle">
        <div class="toggle-icon">
            <svg class="chat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
            </svg>
            <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display: none;">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </div>
        <div class="notification-badge" id="notification-badge" style="display: none;">1</div>
    </div>


    
    <!-- 챗봇 위젯 컨테이너 -->
    <div id="chatbot-widget" class="chatbot-widget">
        <!-- 위젯 헤더 -->
        <div class="widget-header">
            <div class="header-content">
                <div class="brand-info">
                    <div class="brand-avatar">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <div class="brand-name">처음서비스</div>
                        <div class="brand-status">
                            <span class="status-indicator online"></span>
                            온라인
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn minimize-btn" id="minimize-widget">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M19 13H5v-2h14v2z"/>
                        </svg>
                    </button>
                    <button class="action-btn close-btn" id="close-widget">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- 챗봇 컨텐츠 영역 -->
        <div class="widget-content">
            <!-- 채팅 컨테이너 -->
            <div id="chat-container" class="chat-container">
                <!-- 웰컴 메시지 -->
                <div class="message model-message welcome-message">
                    <div class="message-content">
                        <pre>안녕하세요! 😊  
처음서비스 고객지원 챗봇입니다!
                
저희는 마이메일러, 프링고 등 메일 대량 발송 서비스, 
뉴스레터 제작, 기프티콘 발송 대행, 온라인 설문 등의  
다양한 SaaS 솔루션을 제공하고 있습니다.
                
궁금하신 내용을 언제든지 입력해 주세요.  
챗봇을 통한 문의는 24시간 상담이 가능하며,  
빠르고 정확한 답변을 도와드리겠습니다!</pre>
                        
                        <!-- 데모 신청 버튼 -->
                        <div class="demo-button-container">
                            <button id="demo-request-btn" class="demo-button">
                                🎯 데모 신청하기
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 입력 영역 -->
            <div class="input-section">
                <form id="prompt-form" autocomplete="off">
                    <div class="input-wrapper">
                        <textarea id="prompt-input" placeholder="문의 사항을 입력해주세요!" rows="1"></textarea>
                        <button type="submit" id="submit-button" class="send-button" aria-label="전송">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 데모 신청 폼 모달 -->
    <div id="demo-form-container" class="demo-form-container" style="display: none;">
        <div class="demo-form-overlay">
            <form id="demo-form" class="demo-form">
                <div class="demo-form-header">
                    <h3>데모 신청하기</h3>
                    <button type="button" id="demo-form-close" class="demo-form-close">×</button>
                </div>
                
                <div class="demo-form-body">
                    <div class="form-group">
                        <label for="company-name">회사명 *</label>
                        <input type="text" id="company-name" name="companyName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customer-name">고객명 *</label>
                        <input type="text" id="customer-name" name="customerName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">이메일 *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">전화번호 *</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="send-type">발송타입</label>
                        <select id="send-type" name="sendType">
                            <option value="">선택해주세요</option>
                            <option value="마이메일러">마이메일러 (메일 대량 발송)</option>
                            <option value="프링고">프링고 (뉴스레터 제작)</option>
                            <option value="기프티콘발송">기프티콘 발송 대행</option>
                            <option value="온라인설문">온라인 설문</option>
                            <option value="기타">기타 서비스</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="usage-purpose">사용목적 및 이용방식</label>
                        <textarea id="usage-purpose" name="usagePurpose" rows="3" 
                                  placeholder="서비스 이용 목적이나 구체적인 요구사항을 입력해주세요."></textarea>
                    </div>
                    
                    <div id="demo-form-errors" class="demo-form-errors" style="display: none;"></div>
                </div>
                
                <div class="demo-form-footer">
                    <button type="button" id="demo-form-cancel" class="btn-cancel">취소</button>
                    <button type="submit" id="demo-form-submit" class="btn-submit">신청하기</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc, getDoc, updateDoc, arrayUnion, serverTimestamp } 
                from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // Firebase 설정
        const firebaseConfig = {
            projectId: "sampleprojects-468223",
        };
        
        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // 전역으로 노출
        window.firebaseDB = db;
        window.firestoreFunctions = {
            collection, doc, setDoc, getDoc, updateDoc, arrayUnion, serverTimestamp
        };
    </script>
    
    <!-- 외부 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- 위젯 스크립트 -->
    <script src="/widget-script.js"></script>
    <script src="/enhanced-chat.js"></script>
</body>
</html>